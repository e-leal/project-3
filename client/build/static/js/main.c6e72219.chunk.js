(this.webpackJsonpbase=this.webpackJsonpbase||[]).push([[0],{125:function(e,t,a){e.exports=a(145)},130:function(e,t,a){},131:function(e,t,a){},140:function(e,t,a){},144:function(e,t,a){},145:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(45),c=a.n(o),l=(a(130),a(131),a(50)),i=a(16),s=a(35),u=a(122),m=a(15),d=a(156),p=a(150),b=a(155),g=a(153),v=a(157),h=a(21),f=a.n(h),E=a(36),j=a(53),y=a(31),k=a(154),O=a(148),w=a(149),S=a(41),I=a(19),x=a.n(I);function C(){var e=Object(S.a)(["\nmutation removeJob($jobId: ID){\n    removeJob(jobId: $jobId){\n        _id\n        username\n        email\n        employer\n        createdJobs{\n            company\n            title\n            createdAt\n            contact\n            description\n            requirements\n        }\n    }\n}\n"]);return C=function(){return e},e}function J(){var e=Object(S.a)(["\nmutation removeApplication($appplicationId: ID){\n    removeApplication(applicationId: $applicationId){\n        _id\n        username\n        email\n        employer\n        createdApplications{\n            resume\n            email\n            createdAt\n            status\n            appliedJob{\n                _id\n                company\n                createdAt\n                contact\n                description\n                requirements\n            }\n            comments {\n                username\n                createdAt\n                body\n            }\n        }\n    }\n}\n"]);return J=function(){return e},e}function $(){var e=Object(S.a)(["\nmutation createApplication($resume: String!, $company: String!){\n    createApplication(resume: $resume, company: $company){\n        _id\n        resume\n        email\n        createdAt\n        status\n        appliedJob{\n            _id\n            company\n            createdAt\n            contact\n            description\n            requirements\n        }\n        comments {\n            username\n            createdAt\n            body\n        }\n    }\n}\n"]);return $=function(){return e},e}function N(){var e=Object(S.a)(["\nmutation createJob($company: String!, $contact: String!, $description: String!, $requirements: String!){\n    addJob(company: $company, contact: $contact, description: $description, requirements: $requirements){\n        _id\n        company\n        title\n        createdAt\n        contact\n        description\n        requirements\n    }\n}\n"]);return N=function(){return e},e}function q(){var e=Object(S.a)(["\n    mutation saveApplication($applicationId: ID!){\n        saveApplication(applicationId: $applicationId){\n            _id\n            username\n            email\n            employer\n        }\n    }\n"]);return q=function(){return e},e}function A(){var e=Object(S.a)(["\n    mutation saveJob($jobId: ID!){\n        saveJob(jobId: $jobId){\n            _id\n            username\n            email\n            employer\n        }\n    }\n"]);return A=function(){return e},e}function _(){var e=Object(S.a)(["\nmutation addUser($username: String!, $email: String!, $password: String!, $employer: Boolean!){\n       addUser(username: $username, email: $email, password:$password, employer: $employer){\n     \ttoken\n       user {\n       \t_id\n       \tusername\n     \t}\n     }\n }\n"]);return _=function(){return e},e}function L(){var e=Object(S.a)(["\n  mutation login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      user {\n        _id\n        username\n      }\n    }\n  }\n"]);return L=function(){return e},e}var T=x()(L()),F=x()(_()),P=x()(A()),D=(x()(q()),x()(N()),x()($()),x()(J()),x()(C()),a(74)),B=a(75),M=a(88),U=new(function(){function e(){Object(D.a)(this,e)}return Object(B.a)(e,[{key:"getProfile",value:function(){return Object(M.a)(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!!e&&!this.isTokenExpired(e)}},{key:"isTokenExpired",value:function(e){try{return Object(M.a)(e).exp<Date.now()/1e3}catch(t){return!1}}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){console.log("here is our token: ",e),localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.assign("/")}}]),e}()),G=function(){var e=Object(n.useState)({username:"",email:"",password:"",employer:""}),t=Object(m.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(!1),l=Object(m.a)(c,1)[0],i=Object(n.useState)(!1),u=Object(m.a)(i,2),d=u[0],p=u[1],b=Object(s.useMutation)(F),g=Object(m.a)(b,2),v=g[0],h=g[1].error;Object(n.useEffect)((function(){p(!!h)}),[h]);var S=function(e){var t=e.target,n=t.name,r=t.value;console.log(n," is being changed to: ",r),o(Object(y.a)(Object(y.a)({},a),{},Object(j.a)({},n,r)))},I=function(){var e=Object(E.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),!1===t.currentTarget.checkValidity()&&(t.preventDefault(),t.stopPropagation()),e.prev=3,e.next=6,v({variables:Object(y.a)({},a)});case 6:n=e.sent,r=n.data,console.log("our data is: ",r),U.login(r.addUser.token),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),console.error(e.t0),p(!0);case 16:o({username:"",email:"",password:"",employer:""});case 17:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{noValidate:!0,validated:l,onSubmit:I},r.a.createElement(O.a,{dismissible:!0,onClose:function(){return p(!1)},show:d,variant:"danger"},"Something went wrong with your signup!"),r.a.createElement(k.a.Group,null,r.a.createElement(k.a.Label,{htmlFor:"username"},"Username"),r.a.createElement(k.a.Control,{type:"text",placeholder:"Your username",name:"username",onChange:S,value:a.username,required:!0}),r.a.createElement(k.a.Control.Feedback,{type:"invalid"},"Username is required!")),r.a.createElement(k.a.Group,null,r.a.createElement(k.a.Label,{htmlFor:"email"},"Email"),r.a.createElement(k.a.Control,{type:"email",placeholder:"Your email address",name:"email",onChange:S,value:a.email,required:!0}),r.a.createElement(k.a.Control.Feedback,{type:"invalid"},"Email is required!")),r.a.createElement(k.a.Group,null,r.a.createElement(k.a.Label,{htmlFor:"password"},"Password"),r.a.createElement(k.a.Control,{type:"password",placeholder:"Your password",name:"password",onChange:S,value:a.password,required:!0}),r.a.createElement(k.a.Control.Feedback,{type:"invalid"},"Password is required!")),r.a.createElement(k.a.Group,null,r.a.createElement(k.a.Label,{htmlFor:"employer"},"Are you an employer?"),r.a.createElement(k.a.Control,{as:"select",name:"employer",onChange:S,value:a.employer,required:!0,defaultValue:"false"},r.a.createElement("option",{value:"false"},"No"),r.a.createElement("option",{value:"true"},"Yes"))),r.a.createElement(w.a,{disabled:!(a.username&&a.email&&a.password),type:"submit",variant:"success"},"Submit")))},V=(a(140),function(){var e=Object(n.useState)({email:"",password:""}),t=Object(m.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(!1),l=Object(m.a)(c,1)[0],i=Object(n.useState)(!1),u=Object(m.a)(i,2),d=u[0],p=u[1],b=Object(s.useMutation)(T),g=Object(m.a)(b,2),v=g[0],h=g[1].error;Object(n.useEffect)((function(){p(!!h)}),[h]);var S=function(e){var t=e.target,n=t.name,r=t.value;console.log(n," is being changed to: ",r),o(Object(y.a)(Object(y.a)({},a),{},Object(j.a)({},n,r)))},I=function(){var e=Object(E.a)(f.a.mark((function e(t){var n,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=t.currentTarget,console.log("the form is: ",n),!1===n.checkValidity()&&(t.preventDefault(),t.stopPropagation()),e.prev=4,console.log("our user data is: ",a),e.next=8,v({variables:Object(y.a)({},a)});case 8:r=e.sent,c=r.data,console.log("our data result is: ",c),U.login(c.login.token),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),console.error(e.t0);case 17:o({email:"",password:""});case 18:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"signup-body"},r.a.createElement("div",{className:"signup-body-background"},r.a.createElement("div",{className:"signup-form-lower"},r.a.createElement("h2",{className:"signup-title"},"Find your next Career"),r.a.createElement("h3",{className:"signup-title-small"},"Get started today!"),r.a.createElement(k.a,{noValidate:!0,validated:l,onSubmit:I},r.a.createElement(O.a,{dismissible:!0,onClose:function(){return p(!1)},show:d,variant:"danger"},"Something went wrong with your login credentials!"),r.a.createElement(k.a.Group,null,r.a.createElement(k.a.Label,{htmlFor:"email"},"Email"),r.a.createElement(k.a.Control,{type:"text",placeholder:"Email",name:"email",onChange:S,value:a.email,required:!0}),r.a.createElement(k.a.Control.Feedback,{type:"invalid"},"Email is required!")),r.a.createElement(k.a.Group,null,r.a.createElement(k.a.Label,{htmlFor:"password"},"Password"),r.a.createElement(k.a.Control,{type:"password",placeholder:"Password",name:"password",onChange:S,value:a.password,required:!0}),r.a.createElement(k.a.Control.Feedback,{type:"invalid"},"Password is required!")),r.a.createElement(w.a,{disabled:!(a.email&&a.password),type:"submit",variant:"success",className:"signup-login-button"},"Submit")))))}),Y=(a(141),function(){var e=Object(n.useState)(!1),t=Object(m.a)(e,2),a=t[0],o=t[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{bg:"dark",variant:"dark",expand:"lg"},r.a.createElement(p.a,{fluid:!0},r.a.createElement(d.a.Brand,{as:l.b,to:"/"},"Certainly"),r.a.createElement(d.a.Toggle,{"aria-controls":"navbar"}),r.a.createElement(d.a.Collapse,{id:"navbar"},r.a.createElement(b.a,{className:"ml-auto"},r.a.createElement(b.a.Link,{as:l.b,to:"/"},"Search For Jobs"),U.loggedIn()?r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a.Link,{as:l.b,to:"/saved"},"See Your Jobs And Applications"),r.a.createElement(b.a.Link,{onClick:U.logout},"Logout")):r.a.createElement(b.a.Link,{onClick:function(){return o(!0)}},"Login/Sign Up"))))),r.a.createElement(g.a,{size:"lg",show:a,onHide:function(){return o(!1)},"aria-labelledby":"signup-modal"},r.a.createElement(v.a.Container,{defaultActiveKey:"login"},r.a.createElement(g.a.Header,{closeButton:!0},r.a.createElement(g.a.Title,{id:"signup-modal"},r.a.createElement(b.a,{variant:"pills"},r.a.createElement(b.a.Item,null,r.a.createElement(b.a.Link,{eventKey:"login"},"Login")),r.a.createElement(b.a.Item,null,r.a.createElement(b.a.Link,{eventKey:"signup"},"Sign Up"))))),r.a.createElement(g.a.Body,null,r.a.createElement(v.a.Content,null,r.a.createElement(v.a.Pane,{eventKey:"login"},r.a.createElement(V,{handleModalClose:function(){return o(!1)}})),r.a.createElement(v.a.Pane,{eventKey:"signup"},r.a.createElement(G,{handleModalClose:function(){return o(!1)}})))))))}),K=a(81),z=a(151),H=a(152),W=a(158),Q=function(e){return fetch("http://api.jobs2careers.com/api/search.php?id=273&pass=HkdyhY4qQUmJXi5p&q=".concat(e))},R=function(){return localStorage.getItem("saved_jobs")?JSON.parse(localStorage.getItem("saved_jobs")):[]},X=function(e){e.length?localStorage.setItem("saved_jobs",JSON.stringify(e)):localStorage.removeItem("saved_jobs")},Z=a(52),ee=a(124),te=a(123),ae=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(e){var n;return Object(D.a)(this,a),(n=t.call(this,e)).state={searchJobName:"",latitude:"",longitude:""},n.onChangeSearchJob=n.onChangeSearchJob.bind(Object(Z.a)(n)),n.onChangeLocation=n.onChangeLocation.bind(Object(Z.a)(n)),n.checkret=n.checkret.bind(Object(Z.a)(n)),n.route=n.route.bind(Object(Z.a)(n)),n}return Object(B.a)(a,[{key:"onChangeSearchJob",value:function(e){this.setState({searchJobName:e.target.value})}},{key:"onChangeLocation",value:function(e){this.setState({searchLocation:e.target.value})}},{key:"checkret",value:function(e){console.log("location",e),this.setState({latitude:e.coordinates.latitude,longitude:e.coordinates.longitude})}},{key:"route",value:function(e){e.preventDefault(),console.log("Props",this.props),this.state.searchJobName&&this.state.latitude&&this.state.longitude?window.location.href="/searchedjobs/".concat(this.state.searchJobName,"/").concat(this.state.latitude,"/").concat(this.state.longitude):console.log("Please enter both values to proceed")}},{key:"render",value:function(){return r.a.createElement("div",{className:"search-box"},r.a.createElement("form",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-5"},r.a.createElement("input",{type:"text",placeholder:"Search Jobs",className:"inputtext",value:this.state.searchJobName,onChange:this.onChangeSearchJob,required:!0})),r.a.createElement("div",{className:"col-sm-5 inputtext pos-rel"}),r.a.createElement("div",{className:"col-sm-2 searchButton"},r.a.createElement("button",{type:"button",onClick:this.route},"Search")))))}}]),a}(n.Component),ne=function(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(""),l=Object(m.a)(c,2),i=l[0],u=l[1],d=Object(n.useState)(R()),b=Object(m.a)(d,2),g=b[0],v=b[1],h=Object(s.useMutation)(P),j=Object(m.a)(h,1)[0];Object(n.useEffect)((function(){return function(){return X(g)}}));var O=function(){var e=Object(E.a)(f.a.mark((function e(t){var a,n,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),i){e.next=3;break}return e.abrupt("return",!1);case 3:return e.prev=3,e.next=6,Q(i);case 6:if((a=e.sent).ok){e.next=9;break}throw new Error("something went wrong!");case 9:return e.next=11,a.json();case 11:n=e.sent,r=n.items,c=r.map((function(e){return{JobId:e._id,authors:e.title||["No author to display"],company:e.company,description:e.description}})),o(c),u(""),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(3),console.error(e.t0);case 21:case"end":return e.stop()}}),e,null,[[3,18]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(E.a)(f.a.mark((function e(t){var n,r,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.find((function(e){return e.jobId===t})),console.log("Job to save: ",n),U.loggedIn()?U.getToken():null){e.next=5;break}return e.abrupt("return",!1);case 5:return e.prev=5,e.next=8,j({variables:{jobData:Object(y.a)({},n)}});case 8:r=e.sent,o=r.data,console.log("My lovely data: ",o),v([].concat(Object(K.a)(g),[n.jobId])),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(5),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(z.a,{fluid:!0,className:"text-light bg-dark"},r.a.createElement(p.a,null,r.a.createElement("h1",null,"Search for Jobs!"),r.a.createElement(k.a,{onSubmit:O},r.a.createElement(ae,null)))),r.a.createElement(p.a,null,r.a.createElement("h2",null,a.length?"Viewing ".concat(a.length," results:"):"Search for a job to begin"),r.a.createElement(H.a,null,a.map((function(e){return r.a.createElement(W.a,{key:e.jobId,border:"dark"},e.image?r.a.createElement(W.a.Img,{src:e.image,alt:"The cover for ".concat(e.title),variant:"top"}):null,r.a.createElement(W.a.Body,null,r.a.createElement(W.a.Title,null,e.title),r.a.createElement("p",{className:"small"},"Authors: ",e.authors),r.a.createElement(W.a.Text,null,e.description),U.loggedIn()&&r.a.createElement(w.a,{disabled:null===g||void 0===g?void 0:g.some((function(t){return t===e.jobId})),className:"btn-block btn-info",onClick:function(){return S(e.jobId)}},(null===g||void 0===g?void 0:g.some((function(t){return t===e.jobId})))?"This job has already been saved!":"Save this Book!")))})))))},re=(a(144),a(112)),oe=function(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(""),l=Object(m.a)(c,2),i=l[0],u=l[1],d=Object(n.useState)(R()),b=Object(m.a)(d,2),g=b[0],v=b[1],h=Object(s.useMutation)(P),j=Object(m.a)(h,1)[0];Object(n.useEffect)((function(){return function(){return X(g)}}));var O=function(){var e=Object(E.a)(f.a.mark((function e(t){var a,n,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),i){e.next=3;break}return e.abrupt("return",!1);case 3:return e.prev=3,e.next=6,Q(i);case 6:if((a=e.sent).ok){e.next=9;break}throw new Error("something went wrong!");case 9:return e.next=11,a.json();case 11:n=e.sent,r=n.items,c=r.map((function(e){return{JobId:e._id,authors:e.title||["No author to display"],company:e.company,description:e.description}})),o(c),u(""),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(3),console.error(e.t0);case 21:case"end":return e.stop()}}),e,null,[[3,18]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(E.a)(f.a.mark((function e(t){var n,r,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.find((function(e){return e.jobId===t})),console.log("Job to save: ",n),U.loggedIn()?U.getToken():null){e.next=5;break}return e.abrupt("return",!1);case 5:return e.prev=5,e.next=8,j({variables:{jobData:Object(y.a)({},n)}});case 8:r=e.sent,o=r.data,console.log("My lovely data: ",o),v([].concat(Object(K.a)(g),[n.jobId])),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(5),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(z.a,{fluid:!0,className:"text-light bg-dark"},r.a.createElement(p.a,null,r.a.createElement("h1",null,"Search for Jobs!"),r.a.createElement(k.a,{onSubmit:O},r.a.createElement(k.a.Row,null,r.a.createElement(re.a,{xs:12,md:8},r.a.createElement(k.a.Control,{name:"searchInput",value:i,onChange:function(e){return u(e.target.value)},type:"text",size:"lg",placeholder:"Search for a Job"})),r.a.createElement(re.a,{xs:12,md:4},r.a.createElement(w.a,{type:"submit",variant:"success",size:"lg"},"Submit Search")))))),r.a.createElement(p.a,null,r.a.createElement("h2",null,a.length?"Viewing ".concat(a.length," results:"):"Search for a job to begin"),r.a.createElement(H.a,null,a.map((function(e){return r.a.createElement(W.a,{key:e.jobId,border:"dark"},e.image?r.a.createElement(W.a.Img,{src:e.image,alt:"The cover for ".concat(e.title),variant:"top"}):null,r.a.createElement(W.a.Body,null,r.a.createElement(W.a.Title,null,e.title),r.a.createElement("p",{className:"small"},"Authors: ",e.authors),r.a.createElement(W.a.Text,null,e.description),U.loggedIn()&&r.a.createElement(w.a,{disabled:null===g||void 0===g?void 0:g.some((function(t){return t===e.jobId})),className:"btn-block btn-info",onClick:function(){return S(e.jobId)}},(null===g||void 0===g?void 0:g.some((function(t){return t===e.jobId})))?"This job has already been saved!":"Save this Book!")))})))))};var ce=function(){var e=Object(n.useState)("Home"),t=Object(m.a)(e,2),a=t[0],o=t[1];return r.a.createElement("div",null,r.a.createElement(Y,{currentPage:a,handlePageChange:o}),r.a.createElement("div",null,function(){switch(a){case"Signup":return r.a.createElement(G,null);case"Search Jobs":return r.a.createElement(ne,null);default:return r.a.createElement(oe,null)}}()))},le=new u.a({request:function(e){console.log("007 operation: ",e);var t=localStorage.getItem("id_token");console.log("our client app.js is saying our token is: ",t),e.setContext({headers:{authorization:t?"Bearer ".concat(t):""}})},uri:"/graphql"});var ie=function(){return r.a.createElement(s.ApolloProvider,{client:le},r.a.createElement(l.a,null,r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:"/",component:ce}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ie,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[125,1,2]]]);
//# sourceMappingURL=main.c6e72219.chunk.js.map